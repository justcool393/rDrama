{% extends "settings2.html" %}

{% block content %}

{% if u %}
	<h5 class="mt-3">Alts for <a href="/@{{u.username}}">@{{u.username}}</a></h5>
{% else %}
	<h5 class="mt-3">Alts</h5>
{% endif %}

<form action="/admin/alts" method="get" class="mb-6">
	<label for="link-input">Username</label>
	<input autocomplete="off" id="link-input" type="text" class="form-control mb-2" name="username" value="{{u.username if u else ''}}" placeholder="Username">
	<input type="submit" onclick="disable(this)" value="Submit" class="btn btn-primary">
</form>

{% if u %}
<div class="overflow-x-auto">
	<table class="table table-striped mb-5">
	<thead class="bg-primary text-white">
		<tr>
			<th>#</th>
			<th>Name</th>
			<th>Account Created</th>
			<th>Alt Link Created</th>
			<th>Manual</th>
			<th>Delinked</th>
			<th>Actions</th>
		</tr>
	</thead>
	{% for user in alts %}
		<tr>
			<td>{{loop.index}}</td>
			<td>{% include "user_in_table.html" %}</td>
			<td>{{user.created_utc|timestamp}}</td>
			<td>{{user._alt_created_utc|timestamp}}</td>
			<td>{{user._is_manual}}</td>
			<td>{{user._alt_deleted}}</td>
			<td>
				<form method="post">
					<button type="button" id="delink-alt-{{u.id}}-{{user.id}}" class="btn btn-success {% if user._alt_deleted %}d-none{% endif %}" onclick="postToastSwitch(this,'/@{{u.username}}/alts/{{user.id}}/deleted', this.id, 'relink-alt-{{u.id}}-{{user.id}}', 'd-none', null, 'PUT')">Delink</button>
					<button type="button" id="relink-alt-{{u.id}}-{{user.id}}" class="btn btn-danger {% if not user._alt_deleted %}d-none{% endif %}" onclick="postToastSwitch(this,'/@{{u.username}}/alts/{{user.id}}/deleted', this.id, 'delink-alt-{{u.id}}-{{user.id}}', 'd-none', null, 'DELETE')">Relink</button>
				</form>
			</td>
		</tr>
	{% endfor %}
	</table>
{% endif %}
{% endblock %}
